pre-commit:
  parallel: true
  commands:
    frontend-lint-fix:
      run: pnpm -w -F frontend lint:fix
      stage_fixed: true
    lint-staged:
      run: npx lint-staged
      # stage_fixed=true ensures files modified by lint-staged are re-staged
      stage_fixed: true
    # backend-format:
    #   glob: "backend/**/*.go"
    #   run: |
    #     if command -v gofmt >/dev/null 2>&1; then
    #       cd backend && gofmt -w {staged_files}
    #     else
    #       echo "⚠️  gofmt not found, skipping backend format check"
    #     fi
    #   stage_fixed: true

commit-msg:
  commands:
    commitlint:
      run: npx commitlint --edit

post-checkout:
  commands:
    pnpm:
      glob: "{package.json,pnpm-lock.yaml,frontend/package.json}"
      run: pnpm install

post-merge:
  commands:
    pnpm:
      glob: "{package.json,pnpm-lock.yaml,frontend/package.json}"
      run: pnpm install

post-rewrite:
  commands:
    pnpm:
      glob: "{package.json,pnpm-lock.yaml,frontend/package.json}"
      run: pnpm install
